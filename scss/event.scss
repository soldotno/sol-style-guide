@import
    'settings/colors',
    'settings/variables',
    'settings/mixins',

    'modules/reset',
    'modules/typography',
    'modules/typography-event',
    'modules/icons',

    'modules/layout',
    'modules/responsive-embeds',
    'modules/event-ads',
    'modules/advert',
    'modules/image-gallery',
    'modules/spark';

/**
 * Template specific classes.
 */
.event-page {
    max-width:101rem;

    /**
     * Event-headers.
     *
     * This is the introduction to this specific collection.
     */
    main {
        margin-top: $verticalBase;

        > header {
            .event-summary,
            .event-summary-footer {
                float:left;
                width:100%;
            }

            .event-summary {
                @include padding();
                background:$offwhiteColor;
            }

            .event-summary-footer {
                padding:$verticalBase/2 $horizontalBase;
                height:$verticalBase*2;
                overflow:hidden;
                border-bottom:1px solid $borderColor;
                color:$bylineColor;

                // 'Add this' social box doesn't listen, wants to do it's own thing
                .social {
                    position:relative;
                    top:-4px;
                }

                .counts > * {
                    margin-right:$horizontalBase;
                }
            }

            .social {
                display:block;
                width:38.2%; // It's golden!
                float:right;
                text-align:right;
            }
        }
    }

    .sparks {
        clear:both;
    }

    .post-navigation {
        clear:both;
        margin-left:$horizontalBase;
        margin-right:$horizontalBase;
    }

    /**
     * Site-footer.
     *
     * Always at the bottom of our page, the site-footer serves as our colophon.
     * It's styles are mostly imported from elsewhere.
     *
     * @TODO Use flexbox instead
     */
    > footer {
        position:absolute;
        bottom:0;
        left:0;
        width:100%;
    }
}

html {
    position:relative;
    padding-bottom:806px; // Making room for the footer @TODO Use flexbox instead
}

/**
 * Layout-large.
 */
@media screen and (min-width:$largeWidth) {
    $facebookCommentsWidth: 30.0rem;
    .event-page {
        // Move margin() to main element
        .sparks,
        > aside {
            margin:0;
        }

        // Flexbox layout
        main {
            display:flex;
            flex-wrap:wrap;
            margin: $verticalBase $horizontalBase;

            > header {
                flex: 99 1 100.0rem;
            }
            .sparks {
                flex: 1 1 50.0rem;
                margin-right:$horizontalBase;
            }
            > aside {
                flex: 0 0 $facebookCommentsWidth;
                margin-top:$verticalBase; // Same vertical margins as sparks
            }
        }

        main > header {
            // Making space for a background image
            h1 {
                padding:12.5*$verticalBase $horizontalBase 0.5*$verticalBase 3*$horizontalBase;
            }

            > * {
                border:1px solid $borderColor;
                border-bottom-width:0;

                &:last-child {
                    border-bottom-width:1px;

                    .social {
                        top:-5px; // Adjust from -4 for the extra border pixel...
                    }
                }
            }

            .event-summary {
                background:$paperColor;
                padding:1.5*$verticalBase $facebookCommentsWidth 1.5*$verticalBase 3*$horizontalBase;
                padding-right:$facebookCommentsWidth;
            }

            .event-summary-footer {
                padding:0.75*$verticalBase $horizontalBase 0.75*$verticalBase 3*$horizontalBase;
                height:5/2*$verticalBase;
                background:$offwhiteColor;
            }
        }

        .spark {
            border-top-width:1px;
        }

        .item-main {
            img {
                margin:-1*$verticalBase -1*$horizontalBase 0;
                max-width:calc(100% + #{2*$horizontalBase});
            }
        }
    }
}
